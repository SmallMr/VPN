parsers:
# æ–‡æ¡£ï¼šhttps://docs.cfw.lbyczf.com/contents/parser.html
# è§„åˆ™é›†ã€è½¯ä»¶ä¸‹è½½ã€ç¤ºä¾‹ï¼šhttps://github.com/Loyalsoldier/clash-rules
# è¯¦ç»†ç¤ºä¾‹ï¼šhttps://github.com/Fndroid/clash_for_windows_pkg/issues/2193
# - reg: ^.*$ åŒ¹é…æ‰€æœ‰è®¢é˜…ï¼Œæˆ–ç”¨ä¸‹é¢ - url: æŒ‡å®šè®¢é˜…ï¼ŒäºŒé€‰å…¶ä¸€
  - reg: ^.*$
    yaml:
      prepend-proxy-groups:
        - name: æ‰‹åŠ¨åˆ‡æ¢
          type: select
          interval: 300
          proxies:
            - DIRECT
        - name: èŠ‚ç‚¹é€‰æ‹©
          type: select
          interval: 300
          proxies:
            - DIRECT
            - è‡ªåŠ¨é€‰æ‹©
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶ 
        - name: è‡ªåŠ¨é€‰æ‹©
          type: url-test
          url: "http://www.gstatic.com/generate_204"
          interval: 300
        - name: æ¼ç½‘ä¹‹é±¼
          type: select
          interval: 300
          proxies:
            - DIRECT
            - èŠ‚ç‚¹é€‰æ‹©
            - è‡ªåŠ¨é€‰æ‹©
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶
        - name: YouTube
          type: select
          interval: 300
          proxies:
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶
        - name: Netflix
          type: select
          interval: 300
          proxies:
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶            
        - name: Spotify
          type: select
          interval: 300
          proxies:
            - DIRECT
            - èŠ‚ç‚¹é€‰æ‹©
            - è‡ªåŠ¨é€‰æ‹©
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶ 
        - name: ChatGPT
          type: select
          interval: 300
          proxies:
            - DIRECT
            - èŠ‚ç‚¹é€‰æ‹©
            - è‡ªåŠ¨é€‰æ‹©
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶ 
        - name: Google
          type: select
          interval: 300
          proxies:
            - DIRECT
            - èŠ‚ç‚¹é€‰æ‹©
            - è‡ªåŠ¨é€‰æ‹©
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶ 
        - name: Telegram
          type: select
          interval: 300
          proxies:
            - DIRECT
            - èŠ‚ç‚¹é€‰æ‹©
            - è‡ªåŠ¨é€‰æ‹©
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶
        - name: Disney+
          type: select
          interval: 300
          proxies:
            - DIRECT
            - èŠ‚ç‚¹é€‰æ‹©
            - è‡ªåŠ¨é€‰æ‹©
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶
        - name: GitHub
          type: select
          interval: 300
          proxies:
            - DIRECT
            - èŠ‚ç‚¹é€‰æ‹©
            - è‡ªåŠ¨é€‰æ‹©
            - é¦™æ¸¯
            - å°æ¹¾
            - æ–°åŠ å¡
            - æ—¥æœ¬
            - ç¾å›½
            - éŸ©å›½
            - åœŸè€³å…¶
        - name: å…¨çƒç›´è¿
          type: select
          interval: 300
          proxies:
            - DIRECT
            - æ‰‹åŠ¨åˆ‡æ¢
            - èŠ‚ç‚¹é€‰æ‹©
            - è‡ªåŠ¨é€‰æ‹©

        # åœ°åŒº
        - name: é¦™æ¸¯
          type: url-test
          url: "http://www.gstatic.com/generate_204"
          interval: 300
        - name: ç¾å›½
          type: url-test
          url: "http://www.gstatic.com/generate_204"
          interval: 300
        - name: å°æ¹¾
          type: url-test
          url: "http://www.gstatic.com/generate_204"
          interval: 300
        - name: éŸ©å›½
          type: url-test
          url: "http://www.gstatic.com/generate_204"
          interval: 300
        - name: æ—¥æœ¬
          type: url-test
          url: "http://www.gstatic.com/generate_204"
          interval: 300
        - name: æ–°åŠ å¡
          type: url-test
          url: "http://www.gstatic.com/generate_204"
          interval: 300
        - name: åœŸè€³å…¶
          type: url-test
          url: "http://www.gstatic.com/generate_204"
          interval: 300
        - name: å¹¿å‘Šå‡€åŒ–
          type: select
          interval: 300
          proxies:
            - DIRECT
            - REJECT

      mix-rule-providers:
        LocalAreaNetwork:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/LocalAreaNetwork.yaml"
            path: ./ruleset/LocalAreaNetwork.yaml
            interval: 86400
        UnBan:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/UnBan.yaml"
            path: ./ruleset/UnBan.yaml
            interval: 86400
        BanAD:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/BanAD.yaml"
            path: ./ruleset/BanAD.yaml
            interval: 86400
        GoogleFCM:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/BanProgramAD.yaml"
            path: ./ruleset/GoogleFCM.yaml
            interval: 86400
        GitHub:
            type: http
            behavior: classical
            url: "http://localhost/clash/SmallMr/GitHub.yaml"
            path: ./ruleset/GitHub.yaml
            interval: 86400
        GoogleCN:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/GoogleFCM.yaml"
            path: ./ruleset/GoogleCN.yaml
            interval: 86400
        SteamCN:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/GoogleCN.yaml"
            path: ./ruleset/SteamCN.yaml
            interval: 86400
        Telegram:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/Telegram.yaml"
            path: ./ruleset/Telegram.yaml
            interval: 86400
        ChatGPT:
            type: http
            behavior: classical
            url: "http://localhost/clash/SmallMr/ChatGPT.yaml"
            path: ./ruleset/ChatGPT.yaml
            interval: 86400
        YouTube:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/YouTube.yaml"
            path: ./ruleset/YouTube.yaml
            interval: 86400
        Netflix:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/Netflix.yaml"
            path: ./ruleset/Netflix.yaml
            interval: 86400
        Spotify:
            type: http
            behavior: classical
            url: "http://localhost/clash/SmallMr/Spotify.yaml"
            path: ./ruleset/Spotify.yaml
            interval: 86400
        Disney:
            type: http
            behavior: classical
            url: "http://localhost/clash/SmallMr/Disney.yaml"
            path: ./ruleset/Disney.yaml
            interval: 86400
        GFWlist:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/ProxyGFWlist.yaml"
            path: ./ruleset/GFWlist.yaml
            interval: 86400
        ChinaDomain:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/ChinaDomain.yaml"
            path: ./ruleset/ChinaDomain.yaml
            interval: 86400
        # ChinaCompanyIp:
        #     type: http
        #     behavior: classical
        #     url: "http://localhost/clash/ACL4SSR/ChinaCompanyIp.yaml"
        #     path: ./ruleset/ChinaCompanyIp.yaml
        #     interval: 86400
        Download:
            type: http
            behavior: classical
            url: "http://localhost/clash/ACL4SSR/Download.yaml"
            path: ./ruleset/Download.yaml
            interval: 86400
    
      prepend-rules:
        - RULE-SET,LocalAreaNetwork,å…¨çƒç›´è¿
        - RULE-SET,UnBan,å…¨çƒç›´è¿
        - RULE-SET,BanAD,å¹¿å‘Šå‡€åŒ–
        - RULE-SET,GoogleFCM,Google
        - RULE-SET,GitHub,GitHub
        - RULE-SET,GoogleCN,å…¨çƒç›´è¿
        - RULE-SET,SteamCN,å…¨çƒç›´è¿
        - RULE-SET,Telegram,Telegram
        - RULE-SET,ChatGPT,ChatGPT
        - RULE-SET,YouTube,YouTube
        - RULE-SET,Netflix,Netflix
        - RULE-SET,Spotify,Spotify
        - RULE-SET,Disney,Disney+
        - RULE-SET,GFWlist,èŠ‚ç‚¹é€‰æ‹©
        - RULE-SET,ChinaDomain,DIRECT
        # - RULE-SET,ChinaCompanyIp,DIRECT
        - RULE-SET,Download,DIRECT
        - GEOIP,CN,å…¨çƒç›´è¿
        - MATCH,æ¼ç½‘ä¹‹é±¼

      commands:
        # å‘ç­–ç•¥ç»„æ·»åŠ èŠ‚ç‚¹
        - proxy-groups.æ‰‹åŠ¨åˆ‡æ¢.proxies.1+[]proxyNames
        - proxy-groups.è‡ªåŠ¨é€‰æ‹©.proxies=[]proxyNames
        - proxy-groups.é¦™æ¸¯.proxies.0+[]proxyNames|((ğŸ‡­ğŸ‡°)|(æ¸¯)|(HK)|(Hong))
        - proxy-groups.ç¾å›½.proxies.0+[]proxyNames|((ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US))
        - proxy-groups.å°æ¹¾.proxies.0+[]proxyNames|((ğŸ‡¨ğŸ‡³)|(å°)|(Tai)|(TW))
        - proxy-groups.éŸ©å›½.proxies.0+[]proxyNames|((ğŸ‡°ğŸ‡·)|(éŸ©)|(KR))
        - proxy-groups.æ—¥æœ¬.proxies.0+[]proxyNames|((ğŸ‡¯ğŸ‡µ)|(æ—¥)|(Japan)|(JP))
        - proxy-groups.æ–°åŠ å¡.proxies.0+[]proxyNames|((ğŸ‡¸ğŸ‡¬)|(å¡)|(Singapore)|(SG))
        - proxy-groups.åœŸè€³å…¶.proxies.0+[]proxyNames|((ğŸ‡¹ğŸ‡·)|(åœŸ)|(åœŸè€³å…¶))

    code: |
      module.exports.parse = async (raw, { axios, yaml, notify, console }, { name, url, interval, selected }) => {
        const rawObj  = yaml.parse(raw)

        //æ¸…ç©ºè®¢é˜…è‡ªå¸¦çš„æ‰€æœ‰è§„åˆ™å’Œä»£ç†ç»„
        rawObj.rules = []
        rawObj['proxy-groups'] = []

        return yaml.stringify(rawObj )
      }